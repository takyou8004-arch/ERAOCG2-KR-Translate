@IMAGE_DISPLAY( FILENAME, DISPLAY_WIDTH=0, DISPLAY_HEIGHT=0 )
#DIMS FILENAME
#DIM DYNAMIC DISPLAY_WIDTH
#DIM DYNAMIC DISPLAY_HEIGHT
#DIM DYNAMIC GDI値
#DIM GDI보존
#DIMS HTML_TEXT

GDI値 = 4000 + GDI보존
IF !ENUMFILES("RESOURCES/ETC", @"%FILENAME%*", 0)
	RETURN 0
ENDIF

; LOAD IMAGE
GDISPOSE GDI値
SPLIT RESULTS, "\\", RESULTS
GCREATEFROMFILE GDI値, "ETC/"+RESULTS:(RESULT-1)

IF DISPLAY_WIDTH == 0 && DISPLAY_HEIGHT == 0
	DISPLAY_WIDTH = GWIDTH(GDI値)
	DISPLAY_HEIGHT = GHEIGHT(GDI値)
ENDIF
IF DISPLAY_WIDTH == 0
	DISPLAY_WIDTH = DISPLAY_HEIGHT * GWIDTH(GDI値) / GHEIGHT(GDI値)
ENDIF
IF DISPLAY_HEIGHT == 0
	DISPLAY_HEIGHT = DISPLAY_WIDTH * GHEIGHT(GDI値) / GWIDTH(GDI値)
ENDIF

SPRITEDISPOSE @"ETC_{GDI値}"
SPRITECREATE @"ETC_{GDI値}", GDI値
LOCALS = <img src='ETC_{GDI値}' width='{DISPLAY_WIDTH}px' height='{DISPLAY_HEIGHT}px'>
HTML_PRINT LOCALS,0
FOR LOCAL, 0, DISPLAY_HEIGHT / GETCONFIG("一行の高さ")
	PRINTL
NEXT

GDI보존 += 1
IF GDI보존 >= 20
	GDI보존 = 0
ENDIF

RETURN 1

@IMAGE_HAMEDORI(캐릭터_ID,シチュ종류,DISPLAY_WIDTH=0, DISPLAY_HEIGHT=0 )
#DIM DYNAMIC 캐릭터_ID
#DIM DYNAMIC シチュ종류
#DIMS DYNAMIC SIT種
#DIMS DYNAMIC PIC属
#DIM DYNAMIC 画像番号
#DIM DYNAMIC DISPLAY_WIDTH
#DIM DYNAMIC DISPLAY_HEIGHT
#DIM DYNAMIC GDI値
#DIM DYNAMIC TOTAL
#DIM GDI보존
#DIMS HTML_TEXT

GDI値 = 4000 + GDI보존

画像番号 = NO:캐릭터_ID
IF TALENT:캐릭터_ID:모브 >= 1
	画像番号 = TALENT:캐릭터_ID:모브
	;複製캐릭터用 レイ追記250611
ELSEIF TALENT:캐릭터_ID:복제 >= 1
	画像番号 = CFLAG:캐릭터_ID:그래픽설정
ENDIF


SELECTCASE シチュ종류
CASE シチュ_삽입
	PIC属 = INST
CASE シチュ_펠라
	PIC属 = FELA
CASE シチュ_파이즈리
	PIC属 = PAIZ
CASE シチュ_騎乗
	PIC属 = KIJO
CASE シチュ_A삽입
	PIC属 = INSA
CASE シチュ_키스
	PIC属 = KISS
CASE シチュ_情後
	PIC属 = AFTR
CASE シチュ_자위
	PIC属 = SELF

CASE シチュ_ハメ取り
	PIC属 = HAME
CASE シチュ_ポール
	PIC属 = POLE
CASE シチュ_촉수
	PIC属 = SHOK
CASE シチュ_감각遮断
	PIC属 = SHDN
ENDSELECT


TOTAL = ENUMFILES(@"RESOURCES/UFUFU/{画像番号}", @"{画像番号}_%PIC属%*", 0)
;PRINTFORML MATCHING {TOTAL} IMAGES
IF TOTAL <= 0
;    PRINTFORML EARLY ESCAPE
    RETURN 0
ENDIF

FOR LOCAL, 0, TOTAL
    PRINTFORML %RESULTS:LOCAL%
    PRINTFORML %SUBSTRING(RESULTS:LOCAL, 10, -1)%
NEXT

; LOAD IMAGE
; USE SUBSTRING TO REMOVE "RESOURSES/"
GDISPOSE GDI値
GCREATEFROMFILE GDI値, SUBSTRING(RESULTS:(RAND:TOTAL), 10, -1)

IF DISPLAY_WIDTH == 0 && DISPLAY_HEIGHT == 0
	DISPLAY_WIDTH = GWIDTH(GDI値)
	DISPLAY_HEIGHT = GHEIGHT(GDI値)
ENDIF
IF DISPLAY_WIDTH == 0
	DISPLAY_WIDTH = DISPLAY_HEIGHT * GWIDTH(GDI値) / GHEIGHT(GDI値)
ENDIF
IF DISPLAY_HEIGHT == 0
	DISPLAY_HEIGHT = DISPLAY_WIDTH * GHEIGHT(GDI値) / GWIDTH(GDI値)
ENDIF

SPRITECREATE @"HAMEDORI_{GDI値}", GDI値
LOCALS = <img src='HAMEDORI_{GDI値}' width='{DISPLAY_WIDTH}px' height='{DISPLAY_HEIGHT}px'>
HTML_PRINT LOCALS,0
FOR LOCAL, 0, DISPLAY_HEIGHT / GETCONFIG("一行の高さ")
	PRINTL
NEXT

GDI보존 += 1
IF GDI보존 >= 20
	GDI보존 = 0
ENDIF

RETURN 1






@IMAGE_PRODUCTION(캐릭터_ID,설정数値)
#DIM DYNAMIC 캐릭터_ID
#DIM DYNAMIC 설정数値

SIF 설정数値 == 0
	설정数値 = SELECTCOM

;RESOLUTION 500:764
SELECTCASE 설정数値
;V삽입
CASE 60,61,67,68
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_삽입,500,500)
;펠라
CASE 81
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_펠라,500,500)
;파이즈리
CASE 82
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_파이즈리,500,500)
;A삽입
CASE 62,63,69,70
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_A삽입,500,500)
;키스
CASE 20
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_키스,500,500)
;기승위
CASE 9
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_자위,500,500)

;기승위
CASE 65
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_騎乗,500,500)
	SIF RESULT == 0
		CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_삽입,500,500)

CASE 2000
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_ポール,500,500)
CASE 2200
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_촉수,500,500)
CASE 2201
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_감각遮断,500,500)

CASE 8888
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_ハメ取り,500,500)
CASE 9999
	CALL IMAGE_HAMEDORI(캐릭터_ID,シチュ_情後,500,500)
ENDSELECT

RETURN RESULT
