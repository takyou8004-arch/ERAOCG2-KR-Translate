@CARDNAME_40084,参照先
;ココで指定卡片の名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = 惑乱魔卡祖拉
	CASE "略称"
		RESULTS = 卡祖拉(惑)
	CASE "カテゴリ"
		RESULTS:0 = 惑乱魔
		RESULTS:1 = E.R.A
ENDSELECT


@CARD_40084(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "種類"
	
		RETURN 効果モン
	CASE "属性"
		RETURN 地属性
	CASE "種族"
		RETURN 植物族
	CASE "レベル"
		RETURN 4
	CASE "攻撃力"
		RETURN 400
	CASE "守備力"
		RETURN 2400
	CASE "性別"
		RETURN 牝性
ENDSELECT

RETURN 0

@CARD_EXPLANATION_40084(種類)
#DIM DYNAMIC 種類

CALL TEXT_DECORATION("ROGUE")
PRINTL このカード名の①②の効果は1ターンに1度、いずれか1つしか使用できない。
CALLFORM CARD_ABLE(1,ターン開始時)
PRINTL ①：ターン開始時,自分の魔法・罠「蜜罐」1枚を対象として発動する。
PRINTL 作为对象的卡从游戏中"消滅",给予对方2000伤害,自己回复2000基本分,このカードを墓地へ送る
CALLFORM CARD_ABLE(2,効果後誘発)
PRINTL ②：相手がモンスターの召喚・特殊召喚に成功した時に発動出来る。
PRINTL このカードを墓地から特殊召喚する,そのモンスターは「蜜罐」としてこのカードに装備されている。
SETCOLOR C_PINK
CALLFORM CARD_ABLE(3,攻撃時誘発)
PRINTL ③：攻撃表示のこのカードが攻撃対象に選択された場合に発動する。
PRINTL 攻撃モンスターの攻撃力は800ポイントダウンする,このカードを守備表示にする。
RESETCOLOR
CALLFORM CARD_ABLE(0,永続効果)
PRINTL ④：このカードは罠耐性を持つ。
CALL TEXT_DECORATION("ROGUE")


@CARDCAN_40084(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 条件達成
#DIM DYNAMIC 效果先

CALL 対面者判定(決闘者)
対面者 = %RESULTS%


CALL CARD_NEGATE(決闘者,種類,ゾーン,場所,40084)
SIF RESULT == 1
	RETURN 0

IF 種類 == ターン開始時
	SIF ゾーン != "戦場"
		RETURN 0
	SIF 発動済_1(決闘者,40084)
		RETURN 0
	SIF 発動済_2(決闘者,40084)
		RETURN 0

    CALL FULLRESET
    効果範囲魔罠 = 1
    効果範囲相手魔罠 = 1
    効果条件カテゴリ = 蜜罐
    CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
    SIF RESULT != 1
    	RETURN 0
    RETURN 1

ELSEIF 種類 == 効果後誘発
	SIF ゾーン != "墓地"
		RETURN 0
	SIF 発動済_1(決闘者,40084)
		RETURN 0
	SIF 発動済_2(決闘者,40084)
		RETURN 0

	效果先 = FINAL_SUMMON_TARGET(決闘者,1)
	SIF GETVAR(@"%対面者%_MZ_性:效果先") != 牝性 && GETVAR(@"%対面者%_MZ_性:效果先") != ふたなり && GETVAR(@"%対面者%_MZ_性:效果先") != 雄性
		RETURN 0
    RETURN 1

ELSEIF 種類 == 攻撃時誘発
	SIF ゾーン != "戦場"
		RETURN 0
	SIF 戦闘場所(決闘者) != 場所
		RETURN 0
	SIF ターンプレイヤー == 決闘者
		RETURN 0
	SIF GETVAR(@"%決闘者%_MZ_表:場所") == 2
		RETURN 0
	RETURN 1

ELSEIF 種類 == 攻撃時強制誘発
	SIF ゾーン != "戦場"
		RETURN 0
	SIF 戦闘場所(決闘者) != 場所
		RETURN 0
	SIF ターンプレイヤー == 決闘者
		RETURN 0
	SIF GETVAR(@"%決闘者%_MZ_表:場所") == 2
		RETURN 0
	RETURN 1

ELSEIF 種類 == 永続効果
	SIF ゾーン != "戦場"
		RETURN 0
	RETURN 1

ELSEIF 種類 == リアクション効果
	SIF ゾーン != "戦場"
		RETURN 0

    CALL FULLRESET
	CALL CARD_EQUIP_CHECK(決闘者,場所,ゾーン)
    SIF RESULT != 1
    	RETURN 0
    RETURN 1
ENDIF


@CARDEFFECT_40084(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 选择卡片
#DIM DYNAMIC 自己卡片
#DIM DYNAMIC 自己守備力修正
#DIM DYNAMIC 对方卡片
#DIM DYNAMIC 对方攻撃力修正
#DIM DYNAMIC 調教対象
#DIM DYNAMIC 效果先

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

IF 種類 == ターン開始時
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,40084,1)
	IF RESULT == 0
		CALL FULLRESET
    	効果条件カテゴリ = 蜜罐
        CALL CARD_CHOOSE_BASIC(決闘者,"魔罠",ゾーン,場所)
        选择卡片 = RESULT
        IF 选择卡片 != 9999
			TRYCALLFORM CARDNAME_{GETVAR(@"%決闘者%_魔罠:选择卡片")}("名前")
			調教対象 = GETVAR(@"%決闘者%_魔罠:选择卡片")
            CALL FULLRESET
            CALL CARD_DISPOSE(決闘者,"魔罠",选择卡片,消滅行き)
            CALL LIFE_CHANGE(決闘者,"減少","効果",2000,1)
            CALL LIFE_CHANGE(決闘者,"増加","効果",2000)

            CALL CARD_EROTICS(調教対象)
			IF RESULT != -1
				調教対象 = RESULT
				SETCOLOR C_PINK
				PRINTFORML
				PRINTFORMW %CALLNAME:調教対象%丧失了最后逃脱的机会,被卡祖拉封装在叶笼中拖往地下♥永久珍藏♥
				PRINTFORML
				RESETCOLOR
				CALL EROTIC_MOVE("苗床捕縛",調教対象, -1, 1000)
			ENDIF
			CALL CARD_DISPOSE(決闘者,ゾーン,場所)
        ENDIF
    ENDIF

ELSEIF 種類 == 効果後誘発
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,40084,2)
	IF RESULT == 0
    	CALL FULLRESET
		效果先 = FINAL_SUMMON_TARGET(決闘者,1)
        IF 效果先 != 5
        	TRYCALLFORM CARD_{GETVAR(@"%対面者%_戦場:效果先")},"性別"
			IF RESULT == 牝性
				調教対象 = GETVAR(@"%対面者%_戦場:效果先")
                CALL FULLRESET
            	CALL CARD_SP_SUMMON(決闘者, "墓地", 場所)
				効果追加カテ = 蜜罐
            	CALL CARD_EQUIP_MONSTER(決闘者,カード召喚先,"相手戦場",效果先)

            	CALL CARD_EROTICS(調教対象)
				IF RESULT != -1
					調教対象 = RESULT
					SETCOLOR C_PINK
					PRINTFORMW %CALLNAME:調教対象%还没来得及站稳,就被地面窜出的藤蔓拉入了陷阱之中。
					RESETCOLOR
				ENDIF
        	ELSE
            	CALL FULLRESET
        		CALL CARD_SP_SUMMON(決闘者, "墓地", 場所)
				効果追加カテ = 蜜罐
            	CALL CARD_EQUIP_MONSTER(決闘者,カード召喚先,"相手戦場",效果先)
        	ENDIF
        ENDIF
    ENDIF

ELSEIF 種類 == 攻撃時誘発
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,40084)
	IF RESULT == 0
		自己卡片 = 戦闘場所(決闘者)
		自己守備力修正 = GETVAR(@"%決闘者%_MZ_守:自己卡片")
		对方卡片 = 戦闘場所(決闘者,1)
		对方攻撃力修正 = GETVAR(@"%対面者%_MZ_攻:对方卡片")
		TRYCALLFORM CARD_{戦闘カードID(決闘者,1)}("性別")
		IF RESULT == 牝性
			調教対象 = GETVAR(@"%対面者%_戦場:对方卡片")
			CALL CARD_EROTICS(調教対象)
			IF RESULT != -1
				調教対象 = RESULT
				SETCOLOR C_PINK
				PRINTFORMW %CALLNAME:調教対象%被藤蔓拖进陷阱深处固定,衣服被快速溶解,全裸着浸泡在不妙的液体中。
				RESETCOLOR
				CALL EROTIC_MOVE("媚毒汚染",調教対象,NO_TO_CHARANUM(1373))
			ENDIF
			CALL FULLRESET
			CALL CARD_REMOVAL_BASIC(決闘者,"自動処理",对方卡片,"永攻DOWN",800)

		ELSEIF RESULT == 雄性 || RESULT == ふたなり && (对方攻撃力修正 - 800 ) - 自己守備力修正 >= 0
			調教対象 = GETVAR(@"%対面者%_戦場:对方卡片")
			CALL CARD_EROTICS(調教対象)
			IF RESULT != -1
				調教対象 = RESULT
				SETCOLOR C_PINK
				PRINTFORMW 卡祖拉沉溺于交欢的快感，被%CALLNAME:調教対象%的肉棒彻底征服了……！
				RESETCOLOR
				CALL EROTIC_MOVE("前穴凌辱",NO_TO_CHARANUM(1373), -1)
				IF 魔罠数(対面者) < 5
					SETCOLOR C_PINK
					PRINTFORMW 随后就那样被%CALLNAME:調教対象%当作肉铠带走了……
					RESETCOLOR
					CALL CARD_EQUIP_MONSTER(対面者,对方卡片,"相手戦場",自己卡片,(1 + 2))
				ENDIF
			ELSE
				CALLFORM CARDNAME_{GETVAR(@"%対面者%_戦場:对方卡片")}("名前")
				SETCOLOR C_PINK
				PRINTFORMW 卡祖拉沉溺于交欢的快感，被%RESULTS%的肉棒彻底征服了……！
				RESETCOLOR
				CALL EROTIC_MOVE("前穴凌辱",NO_TO_CHARANUM(1373), -1)
				IF 魔罠数(対面者) < 5
					SETCOLOR C_PINK
					PRINTFORMW 随后就那样被%RESULTS%当作肉铠带走了……
					RESETCOLOR
					CALL CARD_EQUIP_MONSTER(対面者,对方卡片,"相手戦場",自己卡片,(1 + 2))
				ENDIF
			ENDIF

		ELSEIF RESULT == 雄性 || RESULT == ふたなり
			調教対象 = GETVAR(@"%対面者%_戦場:对方卡片")
			CALL CARD_EROTICS(調教対象)
			IF RESULT != -1
				調教対象 = RESULT
				SETCOLOR C_PINK
				PRINTFORMW 卡祖拉榨取着%CALLNAME:調教対象%的肉棒，射出的精液与消化液混合在一起，成为了卡祖拉的养料。
				RESETCOLOR
				CALL EROTIC_MOVE("媚毒汚染",調教対象,NO_TO_CHARANUM(1373),100)
			ENDIF
			CALL CARD_REMOVAL_BASIC(決闘者,"自動処理",对方卡片,"永攻DOWN",800)
			
		ELSE
			CALL FULLRESET
			CALL CARD_REMOVAL_BASIC(決闘者,"自動処理",对方卡片,"永攻DOWN",800)
		ENDIF
		CALL SET_FIELD_INFO(決闘者,"戦場",場所,"表",2,1)
	ENDIF

ELSEIF 種類 == 攻撃時強制誘発
	CALL FULLRESET
	IF RESULT == 0
		IF 戦闘場所(決闘者,1) != 5
			CALL CARD_EROTICS(戦闘カードID(決闘者,1))
			IF RESULT != 0
				調教対象 = RESULT
			ENDIF
		ENDIF
		IF 調教対象 > 0
			PRINTFORML
			SETCOLOR C_PINK 
			PRINTFORML %CALLNAME:調教対象%一脚踩空落入了充满粘腻液体的陷阱中。
			RESETCOLOR
		ENDIF		
	ENDIF		

ELSEIF 種類 == 永続効果
	CALL STATCHANGE_EFFECT(決闘者,"自身",場所,"罠耐")

ELSEIF 種類 == リアクション効果
	FOR カウンタ,0,5
		SIF GETVAR(@"%決闘者%_魔罠:カウンタ") == -1
			CONTINUE
		SIF GETVAR(@"%決闘者%_魔_装:カウンタ") != 場所
			CONTINUE
		SIF GETVAR(@"%決闘者%_魔_リ数:カウンタ") >= 10
			CONTINUE
			
		CALL CARD_EROTICS(GETVAR(@"%決闘者%_魔罠:カウンタ"))
		IF RESULT != -1
			調教対象 = RESULT
			SETCOLOR C_PINK
			PRINTFORML
			PRINTFORML %CALLNAME:調教対象%想要逃出卡祖拉的陷阱,却只能无力的撞在猪笼草的盖子上。
            PRINTFORML 被卡祖拉操控的藤蔓好似玩乐一般放松束缚,又在%CALLNAME:調教対象%得以喘息之际将其迅速拉回。
			PRINTFORML
			RESETCOLOR
			CALL EROTIC_MOVE("媚毒汚染",調教対象,NO_TO_CHARANUM(1373),50)
			CALL SET_FIELD_INFO(決闘者,"魔罠",カウンタ,"リ数",1,0,1)
		ENDIF
	NEXT
ENDIF
